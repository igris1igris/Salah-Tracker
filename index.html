<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salah Tracker</title>

    <!-- Boxicons for icons -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

    <style>
        /* ================= RESET & BASE ================= */
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            text-decoration: none;
            list-style: none;
        }
        body {
            font-family: Arial, sans-serif;
            /* Updated background to match logo gradient */
            background: linear-gradient(135deg, #ca8a04 0%, #a16207 50%, #15803d 100%);
            margin: 0;
            padding-top: 80px; /* space for fixed header */
        }

        /* ================= HEADER ================= */
        .main-header {
            position: fixed;
            left: 0;
            top: 0;
            background: white;
            width: 100%;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 100;
        }
        .logo {
            font-size: 32px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(to right, #ca8a04, #a16207, #15803d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            transition: box-shadow 0.2s, transform 0.2s;
        }
        .logo:hover {
            background: linear-gradient(to right, #15803d, #ca8a04, #a16207);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        .logo i {
            font-size: 48px;
        }
        .right-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .notifi, .refresh {
            padding: 8px 12px;
            background-color: white;
            border: 2px solid black;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s, color 0.2s, border 0.2s, box-shadow 0.2s, transform 0.2s;
        }
        .notifi:hover, .refresh:hover {
            background: linear-gradient(90deg, #ca8a04 0%, #15803d 100%);
            color: #fff;
            border-color: #ca8a04;
            box-shadow: 0 2px 8px #15803d44;
            transform: scale(1.07);
        }
        .right-buttons i {
            font-size: 18px;
        }

        /* ================= TIME & DATE SECTION ================= */
        .date-time-section {
            width: 90%;
            max-width: 900px;
            margin: 24px auto 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(21,128,61,0.08);
            padding: 18px 16px;
            text-align: center;
        }
        .date-time-card {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .dt-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }
        .dt-label {
            color: #15803d;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .dt-value {
            color: #a16207;
            font-weight: bold;
            font-size: 1.1em;
        }
        @media (max-width: 600px) {
            .date-time-section {
                padding: 10px 4px;
                margin-top: 60px; /* Reduced from 80px to 60px */
            }
            .location {
                margin-top: 20px; /* Reduced from 70px to 20px */
            }
            .dt-row {
                font-size: 1em;
                flex-direction: column;
                gap: 2px;
            }
        }

        /* ================= LOCATION CARD ================= */
        .location {
            background: linear-gradient(90deg, #eef7ff, #e9fdf4);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 900px;
            margin: 20px auto;
        }
        .location-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3em;
            font-weight: bold;
            flex-wrap: wrap;
        }
        .location-header img {
            width: 20px;
            height: 20px;
        }
        .country {
            font-weight: normal;
            font-size: 0.9em;
            color: #555;
        }
        .details {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .tag {
            background: white;
            border: 2px solid #ccc;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .tag:hover {
            border-color: #007bff;
            color: #007bff;
            transform: scale(1.05);
        }
        .tag:active {
            transform: scale(0.95);
            background-color: #e6f0ff;
        }
        .lofooter {
            margin-top: 15px;
            font-size: 0.85em;
            color: #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }
        .status {
            display: flex;
            align-items: center;
            gap: 5px;
            color: green;
            font-weight: bold;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: green;
            border-radius: 50%;
        }

        /* ================= PRAYER CARD ================= */
        .prayer-card {
            background: linear-gradient(90deg, #fffeee, #f6fff6);
            border: 1px solid #f7e481;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            margin: 0 auto;
            max-width: 900px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            flex-wrap: wrap;
            gap: 10px;
        }
        .prayer-section {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .label {
            font-size: 0.9em;
            color: #555;
        }
        .current-prayer {
            font-size: 1.5em;
            font-weight: bold;
            color: green;
        }
        .next-prayer {
            font-size: 1.5em;
            font-weight: bold;
            color: #0d47a1;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .time-badge {
            background: #fff3cd;
            color: #5a4b00;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: bold;
        }

        /* ================= PRAYER TIMES GRID ================= */
        .prayer-times {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            width: 90%;
            max-width: 900px;
            margin: 20px auto;
        }
        
        .prayer-box {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: box-shadow 0.2s, transform 0.2s, border 0.2s, background 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .prayer-box:hover {
            background: linear-gradient(135deg, #ca8a04 0%, #a16207 50%, #15803d 100%);
            color: #fff;
            border: 2px solid #ca8a04;
            box-shadow: 0 4px 16px rgba(202,138,4,0.15), 0 8px 24px rgba(21,128,61,0.12);
            transform: translateY(-4px) scale(1.03);
        }
        .prayer-box:hover h3,
        .prayer-box:hover .time,
        .prayer-box:hover .icon,
        .prayer-box:hover .badge-green,
        .prayer-box:hover .badge-yellow {
            color: #fff;
        }
        .prayer-box h3 {
            margin: 10px 0 5px;
            font-size: 1.1em;
        }
        .prayer-box .time {
            font-size: 1.4em;
            font-weight: bold;
            color: #1a1a1a;
        }
        .icon {
            background-color: #e0f0ff;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            font-size: 22px;
            color: #333;
        }
        .sun {
            background-color: #fff4cc;
        }
        .current {
            background-color: #e8fff1;
        }
        .next {
            background-color: #fffce8;
        }

        /* ‚úÖ Fixed: Badge green now truly green */
        .badge-green {
            background-color: green;
            color: white;
        }
        .badge-yellow {
            background-color: #facc15;
            color: #5a4b00;
        }

        @media (max-width: 600px) {
            .prayer-box .time {
                font-size: 1.2em;
            }
            .location {
                margin-top: 20px; /* Reduced from 70px to 20px */
            }
        }

        /* ================= QIBLA SECTION ================= */
        .qibla-section {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            width: 95%;
            max-width: 900px;
            margin: 30px auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
        }
        .qibla-title {
            font-size: 1.3em;
            margin-bottom: 32px; /* Increased space below h2 */
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            background: linear-gradient(90deg, #38bdf8 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        .qibla-compass {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .compass-circle {
            position: relative;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: radial-gradient(circle at 60% 40%, #e0f2fe 60%, #d1fae5 100%);
            border: 8px solid #ffd700;
            box-shadow: 0 8px 32px rgba(34,197,94,0.12), 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .needle-container {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 0;
            height: 0;
            z-index: 2;
            pointer-events: none;
        }
        .needle {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 8px;
            height: 110px;
            border-radius: 4px;
            transform-origin: 50% 90%;
            transition: transform 0.5s cubic-bezier(.4,2,.6,1);
            pointer-events: none;
        }
        .needle.red {
            background: linear-gradient(to top, #d32f2f 60%, #fff 100%);
            box-shadow: 0 0 16px 2px #d32f2f88;
            border: 2px solid #fff;
            z-index: 3;
        }
        .needle.qibla {
            background: linear-gradient(to top, #ffd700 60%, #fffbe6 100%);
            box-shadow: 0 0 18px 4px #ffd70088;
            border: 2px solid #fffbe6;
            z-index: 4;
        }
        .needle-base {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 24px;
            height: 24px;
            background: #fffbe6;
            border-radius: 50%;
            border: 2px solid #ffd700;
            z-index: 5;
            box-shadow: 0 0 8px #facc15;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        .compass-center {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 38px;
            height: 38px;
            background: radial-gradient(circle, #fffbe6 70%, #facc15 100%);
            border-radius: 50%;
            border: 3px solid #ffd700;
            box-shadow: 0 0 12px 2px #facc15;
            transform: translate(-50%, -50%);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .compass-center i {
            color: #facc15;
            font-size: 22px;
            filter: drop-shadow(0 0 2px #fffbe6);
        }
        @media (max-width: 500px) {
            .compass-circle {
                width: 170px;
                height: 170px;
            }
            .needle {
                height: 70px;
            }
            .needle-base {
                width: 16px;
                height: 16px;
            }
            .compass-center {
                width: 28px;
                height: 28px;
                font-size: 16px;
            }
        }

        /* Responsive adjustments for mobile devices */
@media (max-width: 600px) {
    /* Compass size and needle adjustments */
    .compass-circle {
        width: 170px;
        height: 170px;
    }
    .needle {
        height: 70px;
        top: 30px;
        left: 50%;
        /* Ensure needle starts from center and doesn't cross compass */
        transform-origin: 100% 100%;
    }
    .needle.qibla {
        /* Adjust yellow needle to start from center and point correctly */
        transform: rotate(120deg) translateX(-50%);
        height: 70px;
        top: 30px;
    }
    .needle.red {
        /* Adjust red needle to not touch north/south */
        height: 70px;
        top: 30px;
    }
    .compass-center {
        width: 28px;
        height: 28px;
        font-size: 16px;
    }
    /* Footer content centered on mobile */
    .footer-content {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 12px;
    }
    .footer-social {
        justify-content: center;
    }
}

/* Responsive adjustments for tablets and small laptops */
@media (max-width: 900px) {
    .footer-content {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 16px;
    }
    .footer-social {
        justify-content: center;
    }
}

        /* ================= QIBLA STATS ================= */
        .qibla-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }
        .stat-box {
            flex: 1 1 150px;
            padding: 15px;
            border-radius: 8px;
            background: #f9fafb;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .stat-box .label {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 5px;
        }
        .stat-box .value {
            font-size: 1.5em;
            font-weight: bold;
        }
        .stat-box .sub {
            font-size: 0.85em;
            color: #555;
            margin-top: 6px;
            display: block;
        }
        .yellow { background: #fff9db; }
        .blue { background: #e0f2fe; }
        .green { background: #dcfce7; }

        .qibla-note {
            margin-top: 15px;
            font-size: 0.9em;
            color: #555;
        }
        .highlight {
            color: goldenrod;
            font-weight: bold;
        }

        /* ================= QURANIC VERSES ================= */
        .salah-verses {
            background: #fff;
            border-radius: 14px;
            padding: 24px 18px;
            margin: 32px auto 0 auto;
            width: 90%;
            max-width: 900px;
            box-shadow: 0 4px 18px rgba(21,128,61,0.10), 0 2px 8px rgba(202,138,4,0.08);
            color: #333;
        }
        .verses-title {
            font-size: 1.2em;
            margin-bottom: 18px;
            text-align: center;
            letter-spacing: 1px;
            background: linear-gradient(90deg, #38bdf8 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            font-weight: bold;
        }
        .verse-slider {
            position: relative;
            min-height: 120px;
        }
        .verse-box {
            position: absolute;
            left: 0; right: 0; top: 0;
            opacity: 0;
            pointer-events: none;
            background: rgba(202,138,4,0.07);
            border-radius: 10px;
            padding: 16px 12px;
            margin-bottom: 0;
            box-shadow: 0 2px 8px rgba(202,138,4,0.07);
            transition: opacity 0.8s;
        }
        .verse-box.active {
            opacity: 1;
            pointer-events: auto;
            transition: opacity 0.8s;
        }
        .verse-arabic {
            font-size: 1.15em;
            font-family: 'Scheherazade', serif, Arial;
            text-align: right;
            margin-bottom: 8px;
            color: #15803d;
            letter-spacing: 1px;
        }
        .verse-translation {
            font-size: 1em;
            color: #333;
            margin-bottom: 0;
        }
        .verse-ref {
            color: #ca8a04;
            font-size: 0.95em;
            font-weight: bold;
        }
        @media (max-width: 600px) {
            .salah-verses {
                padding: 14px 6px;
            }
            .verse-box {
                padding: 10px 6px;
            }
        }

        /* ================= SLIDER ================= */
        .verse-slider {
            position: relative;
            overflow: hidden;
            height: 80px;
        }
        .verse-box {
            position: absolute;
            width: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .verse-box.active {
            opacity: 1;
        }

        /* ================= FOOTER ================= */
.main-footer {
    background: linear-gradient(90deg, #ca8a04 0%, #15803d 100%);
    color: #fff;
    padding: 28px 0 12px 0;
    margin-top: 40px;
    font-size: 1em;
    box-shadow: 0 -2px 8px rgba(21,128,61,0.08);
}
.footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    max-width: 900px;
    margin: 0 auto 8px auto;
    padding: 0 18px;
    gap: 18px;
}
.footer-contact span {
    display: block;
    margin-bottom: 6px;
    font-size: 1em;
}
.footer-contact a {
    color: #fff;
    text-decoration: underline;
    transition: color 0.2s;
}
.footer-contact a:hover {
    color: #ffd700;
}
.footer-social {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1em;
}
.social-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: rgba(255,255,255,0.08);
    color: #fff;
    font-size: 1.5em;
    margin-left: 4px;
    transition: background 0.2s, color 0.2s, transform 0.2s;
}
.social-icon:hover {
    background: #fff;
    color: #15803d;
    transform: scale(1.15) rotate(-8deg);
    box-shadow: 0 2px 8px #ffd70044;
}
.footer-bottom {
    text-align: center;
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1.5px dashed #ffd700;
    background: linear-gradient(90deg, #fef9c3 0%, #dcfce7 100%);
    border-radius: 0 0 14px 14px;
    box-shadow: 0 2px 12px #facc1533;
    color: #333;
    font-size: 1.08em;
    letter-spacing: 0.5px;
}
.footer-bottom.decorated-footer {
    text-align: center;
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1.5px dashed #ffd700;
    background: linear-gradient(90deg, #fef9c3 0%, #dcfce7 100%);
    border-radius: 0 0 14px 14px;
    box-shadow: 0 2px 12px #facc1533;
    color: #333;
    font-size: 1.08em;
    letter-spacing: 0.5px;
}
.footer-main-title {
    font-weight: bold;
    font-size: 1.08em;
    color: #15803d;
    margin-bottom: 6px;
    letter-spacing: 1px;
}
.footer-brand {
    color: #ca8a04;
    font-weight: 700;
    letter-spacing: 1px;
}
.footer-desc {
    margin-bottom: 6px;
    color: #a16207;
    font-size: 1em;
}
.footer-highlight {
    color: #22c55e;
    font-weight: 600;
}
.footer-bless {
    color: #0d47a1;
    font-size: 0.98em;
}
.footer-bless-highlight {
    color: #ca8a04;
    font-weight: 600;
}
.footer-dev {
    margin-top: 10px;
    font-size: 1em;
    color: #15803d;
    font-weight: 600;
    letter-spacing: 0.5px;
    font-family: 'Segoe UI', Arial, sans-serif;
    text-shadow: 0 1px 6px #fffbe6;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
}
.dev-name {
    color: #ca8a04;
    font-weight: bold;
    font-size: 1.08em;
    letter-spacing: 1px;
    padding-left: 2px;
    padding-right: 2px;
    background: linear-gradient(90deg, #0845a8 0%, #2a22c5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
@media (max-width: 600px) {
    .footer-dev {
        font-size: 0.98em;
        margin-top: 6px;
    }
}
@media (max-width: 600px) {
    .footer-bottom.decorated-footer {
        font-size: 0.98em;
        padding-top: 12px;
    }
    .footer-main-title,
    .footer-desc,
    .footer-bless {
        margin-bottom: 4px;
    }
}

.direction {
    position: absolute;
    font-weight: bold;
    font-size: 1.2em;
    color: #333;
    text-shadow: 0 2px 8px #fffbe6;
    letter-spacing: 2px;
    z-index: 20;
    /* Remove any flex or centering here */
}
.north { 
    top: 2px; 
    left: 50%; 
    transform: translateX(-50%); 
}
.east { 
    right: 2px; 
    top: 50%; 
    transform: translateY(-50%); 
}
.south { 
    bottom: 2px; 
    left: 50%; 
    transform: translateX(-50%); 
}
.west { 
    left: 2px; 
    top: 50%; 
    transform: translateY(-50%); 
}

    </style>
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="main-header">
    <a href="#" class="logo">
        <i class='bx bx-time'></i> Salah Tracker
    </a>
    <div class="right-buttons">
        <button class="notifi">
            <i class='bx bx-bell'></i> Notifications
        </button>
        <button class="refresh">
            <i class='bx bxs-location-plus'></i> Refresh
        </button>
    </div>
</header>



<!-- ================= TIME & DATE SECTION ================= -->
<section class="date-time-section">
    <div class="date-time-card">
        <div class="dt-row">
            <span class="dt-label"><i class='bx bx-time'></i> Current Time:</span>
            <span class="dt-value" id="current-time">--:--:--</span>
        </div>
        <div class="dt-row">
            <span class="dt-label"><i class='bx bx-calendar'></i> English Date:</span>
            <span class="dt-value" id="english-date">--</span>
        </div>
        <div class="dt-row">
            <span class="dt-label"><i class='bx bx-calendar-star'></i> Islamic Date:</span>
            <span class="dt-value" id="islamic-date">--</span>
        </div>
    </div>
</section>



<!-- ================= LOCATION & PRAYER TIMES (Responsive, Real-Time) ================= -->
<section id="prayer-location-card" style="width:90%;max-width:900px;margin:24px auto 0 auto;">
  <div style="background:linear-gradient(90deg,#eef7ff,#e9fdf4);border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <div style="display:flex;align-items:center;gap:10px;font-size:1.3em;font-weight:bold;flex-wrap:wrap;">
      <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" alt="location" style="width:20px;height:20px;">
      <span id="auto-city">Getting location‚Ä¶</span>
      <span class="country" id="auto-country"></span>
    </div>
    <div style="display:flex;flex-wrap:wrap;gap:10px;margin-top:15px;">
      <div class="tag" id="auto-lat">üåê Lat: ‚Äî</div>
      <div class="tag" id="auto-lng">üåê Lng: ‚Äî</div>
      <div class="tag" id="auto-timezone">üïí ‚Äî</div>
    </div>
    <div class="lofooter" style="margin-top:15px;font-size:0.85em;color:#555;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:5px;">
      <span id="auto-updated">Last updated: ‚Äî</span>
      <div class="status">
        <div class="status-dot"></div>
        Location active
      </div>
    </div>
    
  </div>
  <div style="margin-top:18px;background:#fff;border-radius:12px;padding:18px 12px;box-shadow:0 2px 8px rgba(21,128,61,0.08);">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;">
      <div>
        <span style="color:#15803d;font-weight:600;">Next Prayer</span>
        <span id="auto-next-prayer" style="font-size:1.3em;font-weight:bold;color:#0d47a1;margin-left:8px;">‚Äî</span>
        <span id="auto-next-time" class="time-badge" style="background:#fff3cd;color:#5a4b00;padding:3px 8px;border-radius:6px;font-size:0.95em;font-weight:bold;margin-left:6px;">--:--</span>
      </div>
      <div>
        <span style="color:#15803d;font-weight:600;">Countdown:</span>
        <span id="auto-countdown" style="font-family:monospace;font-size:1.2em;">--:--:--</span>
      </div>
    </div>
    <div style="margin-top:16px;">
      <table style="width:100%;border-collapse:collapse;">
        <thead>
          <tr style="background:rgba(202,138,4,0.07);">
            <th style="text-align:left;padding:8px 6px;color:#a16207;">Prayer</th>
            <th style="text-align:left;padding:8px 6px;color:#a16207;">Adhan</th>
          </tr>
        </thead>
        <tbody id="auto-times-body">
          <!-- JS will fill -->
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Move the prayer-card directly below and adjust margin-top -->
<section class="prayer-card" style="margin:18px auto 0 auto;">
    <div class="prayer-section">
        <span class="label">Current Prayer</span>
        <span class="current-prayer">Fajr</span>
    </div>
    <div class="prayer-section" style="text-align: right;">
        <span class="label">Next Prayer</span>
        <span class="next-prayer">Dhuhur <span class="time-badge">12:15</span></span>
    </div>
</section>

<!-- ================= PRAYER TIMES GRID (DYNAMIC) ================= -->
<section class="prayer-times" id="prayer-times"></section>

<script>
// ========== DYNAMIC PRAYER TIMES GRID ==========

// Prayer order and icons
const prayerOrderGrid = ["Fajr", "Dhuhr", "Asr", "Maghrib", "Isha"];
const prayerIconsGrid = [
    "<i class='bx bx-star'></i>",
    "<i class='bx bx-sun'></i>",
    "<i class='bx bx-sun'></i>",
    "<i class='bx bx-cloud'></i>",
    "<i class='bx bx-moon'></i>"
];

// Fill the grid with times and highlight current/next
function fillPrayerGrid(times) {
    const container = document.getElementById('prayer-times');
    if (!container) return;
    container.innerHTML = '';
    // Get current and next prayer index
    const now = new Date();
    const currentMinutes = now.getHours() * 60 + now.getMinutes();
    const timeList = prayerOrderGrid.map(prayer => {
        const t = times[prayer];
        if (!t) return 0;
        const [h, m] = t.split(':').map(Number);
        return h * 60 + m;
    });
    let currentIdx = 0;
    for (let i = 0; i < timeList.length; i++) {
        if (currentMinutes >= timeList[i]) currentIdx = i;
    }
    let nextIdx = (currentIdx + 1) % timeList.length;

    // Build grid
    prayerOrderGrid.forEach((prayer, i) => {
        const box = document.createElement('div');
        box.className = 'prayer-box';
        if (i === currentIdx) box.classList.add('current');
        if (i === nextIdx) box.classList.add('next');
        box.innerHTML = `
            <div class="icon${prayer === "Dhuhr" ? " sun" : ""}">${prayerIconsGrid[i]}</div>
            <h3>${prayer}</h3>
            <p class="time">${times[prayer] || '--:--'}</p>
            ${i === currentIdx ? "<span class='badge-green'>Current</span>" : ""}
            ${i === nextIdx ? "<span class='badge-yellow'>Next</span>" : ""}
        `;
        container.appendChild(box);
    });
}

// Hook into auto-location prayer times
function updatePrayerGridFromAuto(times) {
    if (times && times.Fajr) fillPrayerGrid(times);
}

// Update every minute for highlight
setInterval(() => updatePrayerGridFromAuto(prayerTimings), 60000);

// Call after prayerTimings is set in fetchLocationAndPrayerTimes
function fillPrayerTable(times) {
  const order = ["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];
  autoTimesBody.innerHTML = '';
  order.forEach(name=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td style="padding:10px 6px;font-weight:600;">${name}</td>
      <td style="padding:10px 6px;font-family:monospace;font-weight:600;">${times[name]}</td>`;
    autoTimesBody.appendChild(tr);
  });
  // Add this line:
  updatePrayerGridFromAuto(times);
}

// Also update on page load (in case location loads late)
setTimeout(() => updatePrayerGridFromAuto(prayerTimings), 1500);
</script>


<!-- ================= LOCATION SECTION ================= -->
<!--
<section class="location">
    <div class="location-header">
        <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" alt="location">
        <span id="city">Karachi</span>
        <span class="country" id="country">Pakistan</span>
    </div>
    <div class="details">
        <div class="tag" id="lat">üåê Lat: 24.8591</div>
        <div class="tag" id="lng">üåê Lng: 66.9983</div>
        <div class="tag" id="timezone">üïí Asia/Karachi</div>
    </div>
    <div class="lofooter">
        <span id="updated">Last updated: 11/08/2025, 04:48:57</span>
        <div class="status">
            <div class="status-dot"></div>
            Location active
        </div>
    </div>
</section>
-->

<!-- ================= CURRENT/NEXT PRAYER ================= -->


<!-- ================= PRAYER TIMES ================= -->
<!--<section class="prayer-times">
    <div class="prayer-box current">
        <div class="icon"><i class='bx bx-star'></i></div>
        <h3>Fajr</h3>
        <p class="time">05:30</p>
        <span class="badge-green">Current</span>
    </div>

    <div class="prayer-box next">
        <div class="icon sun"><i class='bx bx-sun'></i></div>
        <h3>Dhuhur</h3>
        <p class="time">12:15</p>
        <span class="badge-yellow">Next</span>
    </div>

    <div class="prayer-box">
        <div class="icon"><i class='bx bx-sun'></i></div>
        <h3>Asr</h3>
        <p class="time">15:45</p>
    </div>

    <div class="prayer-box">
        <div class="icon"><i class='bx bx-cloud'></i></div>
        <h3>Maghrib</h3>
        <p class="time">18:20</p>
    </div>

    <div class="prayer-box">
        <div class="icon"><i class='bx bx-moon'></i></div>
        <h3>Isha</h3>
        <p class="time">19:45</p>
    </div>
</section>
  -->
<!-- ================= QIBLA SECTION ================= -->
<!-- <section class="qibla-section"> 
    <h2 class="qibla-title"><i class='bx bx-compass'></i> Qibla Direction</h2>
    <div class="qibla-compass">
        <div class="compass-circle">
            <span class="direction north">N</span>
            <span class="direction east">E</span>
            <span class="direction south">S</span>
            <span class="direction west">W</span>
            <div class="needle-container">
                <div class="needle-base"></div>
                <div class="needle red" id="compass-needle"></div>
                <div class="needle qibla" id="qibla-needle"></div>
            </div>
            <div class="compass-center">
                <i class='bx bx-kaaba'></i>
            </div>
        </div>
    </div>

   
    <div class="qibla-stats">
        <div class="stat-box yellow">
            <span class="label">Qibla Direction</span>
            <span class="value">268¬∞</span>
            <span class="sub">W</span>
        </div>

        <div class="stat-box blue">
            <span class="label">Distance to Mecca</span>
            <span class="value">2.8k km</span>
            <span class="sub"><i class='bx bx-map'></i> Saudi Arabia</span>
        </div>

        <div class="stat-box green">
            <span class="label">Accuracy</span>
            <span class="value">¬±2¬∞</span>
            <span class="sub">High</span>
        </div>
    </div>

    <p class="qibla-note">
        Hold your device flat and point the <span class="highlight">yellow arrow</span> toward the Qibla direction. 
        The red indicator shows your device's current orientation.
    </p>
</section>
-->
    <!-- Quranic Verses Section -->
    <section class="salah-verses">
        <h3 class="verses-title"><i class='bx bx-book-open'></i> Quranic Verses About Salah</h3>
        <div class="verse-slider">
            <div class="verse-box active">
                <p class="verse-arabic">ÿ•ŸêŸÜŸëŸé ÿßŸÑÿµŸëŸéŸÑŸéÿßÿ©Ÿé ŸÉŸéÿßŸÜŸéÿ™Ÿí ÿπŸéŸÑŸéŸâ ÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸêŸäŸÜŸé ŸÉŸêÿ™Ÿéÿßÿ®Ÿãÿß ŸÖŸëŸéŸàŸíŸÇŸèŸàÿ™Ÿãÿß</p>
                <p class="verse-translation">Indeed, prayer has been decreed upon the believers a decree of specified times. <span class="verse-ref">(Qur'an 4:103)</span></p>
            </div>
            <div class="verse-box">
                <p class="verse-arabic">ŸàŸéÿ£ŸéŸÇŸêŸÖŸê ÿßŸÑÿµŸëŸéŸÑŸéÿßÿ©Ÿé ŸÑŸêÿ∞ŸêŸÉŸíÿ±ŸêŸä</p>
                <p class="verse-translation">And establish prayer for My remembrance. <span class="verse-ref">(Qur'an 20:14)</span></p>
            </div>
            <div class="verse-box">
                <p class="verse-arabic">ÿ≠ŸéÿßŸÅŸêÿ∏ŸèŸàÿß ÿπŸéŸÑŸéŸâ ÿßŸÑÿµŸëŸéŸÑŸéŸàŸéÿßÿ™Ÿê ŸàŸéÿßŸÑÿµŸëŸéŸÑŸéÿßÿ©Ÿê ÿßŸÑŸíŸàŸèÿ≥Ÿíÿ∑ŸéŸâ</p>
                <p class="verse-translation">Guard strictly the prayers, especially the middle prayer. <span class="verse-ref">(Qur'an 2:238)</span></p>
            </div>
        </div>
    </section>

<!-- ================= FOOTER ================= -->
<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-contact">
            <span><i class='bx bx-envelope'></i> Email: <a href="mailto:ahmad@example.com">ahmad@example.com</a></span>
            <span><i class='bx bx-phone'></i> Contact: <a href="tel:+923001234567">+92 000 0000000</a></span>
        </div>
        <div class="footer-social">
            <span>Follow us:</span>
            <a href="#" class="social-icon"><i class='bx bxl-facebook'></i></a>
            <a href="#" class="social-icon"><i class='bx bxl-twitter'></i></a>
            <a href="#" class="social-icon"><i class='bx bxl-instagram'></i></a>
            <a href="#" class="social-icon"><i class='bx bxl-youtube'></i></a>
        </div>
    </div>
    <div class="footer-bottom decorated-footer">
        <div class="footer-main-title">¬© 2025 <span class="footer-brand">Salah Tracker</span>. All rights reserved.</div>
        <div class="footer-desc">Salah Tracker ‚Äî <span class="footer-highlight">Helping you keep track of your prayers.</span></div>
        <div class="footer-bless">Stay connected, <span class="footer-bless-highlight">stay blessed.</span></div>
        <div class="footer-dev">
            <span>Developed by <span class="dev-name">Ahmad Raza</span></span>
        </div>
    </div>
</footer>




<script>
    // ================== LOCATION LOGIC WITH API ==================
async function updateLocationAndPrayerTimes() {
    if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(async function(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            document.getElementById('lat').textContent = `üåê Lat: ${lat.toFixed(4)}`;
            document.getElementById('lng').textContent = `üåê Lng: ${lng.toFixed(4)}`;
            document.getElementById('updated').textContent = `Last updated: ${new Date().toLocaleString()}`;

            // Get city/country using OpenCage Geocoding API (replace YOUR_API_KEY)
            try {
                const geoRes = await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${lat}+${lng}&key=YOUR_API_KEY`);
                const geoData = await geoRes.json();
                if (geoData.results && geoData.results.length > 0) {
                    const comp = geoData.results[0].components;
                    document.getElementById('city').textContent = comp.city || comp.town || comp.village || 'Unknown';
                    document.getElementById('country').textContent = comp.country || 'Unknown';
                }
            } catch (e) {
                document.getElementById('city').textContent = 'Unknown';
                document.getElementById('country').textContent = 'Unknown';
            }
            // Update prayer times after location is set
            updatePrayerTimesWithAPI(lat, lng);
        });
    } else {
        // Fallback to Karachi if geolocation not available
        updatePrayerTimesWithAPI(24.8591, 66.9983);
    }
}
updateLocationAndPrayerTimes();

// ================== PRAYER TIMES LOGIC WITH API ==================
async function updatePrayerTimesWithAPI(lat, lng) {
    const today = new Date();
    const dateStr = `${today.getDate()}-${today.getMonth()+1}-${today.getFullYear()}`;
    try {
        const res = await fetch(`https://api.aladhan.com/v1/timings/${dateStr}?latitude=${lat}&longitude=${lng}&method=2`);
        const data = await res.json();
        if (data.data && data.data.timings) {
            const times = data.data.timings;
            const prayerOrder = ["Fajr", "Dhuhr", "Asr", "Maghrib", "Isha"];
            const boxes = document.querySelectorAll('.prayer-box');
            prayerOrder.forEach((prayer, i) => {
                if (boxes[i]) {
                    boxes[i].querySelector('.time').textContent = times[prayer];
                }
            });
            // Update current/next prayer and highlight after times are set
            updateCurrentAndNextPrayer();
            highlightCurrentAndNextPrayer();
        }
    } catch (e) {
        // fallback: do nothing
    }
}

// ================== ISLAMIC DATE WITH API ==================
async function updateIslamicDate() {
    const today = new Date();
    const dateStr = `${today.getDate()}-${today.getMonth()+1}-${today.getFullYear()}`;
    try {
        const res = await fetch(`https://api.aladhan.com/v1/gToH?date=${dateStr}`);
        const data = await res.json();
        if (data.data && data.data.hijri) {
            document.getElementById('islamic-date').textContent =
                `${data.data.hijri.day} / ${data.data.hijri.month.number} / ${data.data.hijri.year} AH`;
        }
    } catch (e) {
        // fallback: do nothing
    }
}
updateIslamicDate();

// ================== TIME & ENGLISH DATE ==================
function updateDateTime() {
    const now = new Date();
    document.getElementById('current-time').textContent = now.toLocaleTimeString();
    document.getElementById('english-date').textContent = now.toLocaleDateString();
}
updateDateTime();
setInterval(updateDateTime, 1000);

// ================== CURRENT & NEXT PRAYER DISPLAY & HIGHLIGHT ==================
function updateCurrentAndNextPrayer() {
    const prayerOrder = ["Fajr", "Dhuhur", "Asr", "Maghrib", "Isha"];
    const boxes = document.querySelectorAll('.prayer-box');
    const times = Array.from(boxes).map(box => {
        const timeStr = box.querySelector('.time').textContent.trim();
        const [h, m] = timeStr.split(':').map(Number);
        return h * 60 + m;
    });

    const now = new Date();
    const currentMinutes = now.getHours() * 60 + now.getMinutes();

    let currentIdx = 0;
    for (let i = 0; i < times.length; i++) {
        if (currentMinutes >= times[i]) currentIdx = i;
    }
    let nextIdx = (currentIdx + 1) % times.length;

    document.querySelector('.current-prayer').textContent = prayerOrder[currentIdx];
    const nextPrayerName = prayerOrder[nextIdx];
    const nextPrayerTime = boxes[nextIdx].querySelector('.time').textContent.trim();
    document.querySelector('.next-prayer').innerHTML = `${nextPrayerName} <span class="time-badge">${nextPrayerTime}</span>`;
}
function highlightCurrentAndNextPrayer() {
    const boxes = document.querySelectorAll('.prayer-box');
    const times = Array.from(boxes).map(box => {
        const timeStr = box.querySelector('.time').textContent.trim();
        const [h, m] = timeStr.split(':').map(Number);
        return h * 60 + m;
    });

    const now = new Date();
    const currentMinutes = now.getHours() * 60 + now.getMinutes();

    boxes.forEach(box => {
        box.classList.remove('current', 'next');
        box.querySelectorAll('.badge-green, .badge-yellow').forEach(b => b.remove());
    });

    let currentIdx = 0;
    for (let i = 0; i < times.length; i++) {
        if (currentMinutes >= times[i]) currentIdx = i;
    }
    let nextIdx = (currentIdx + 1) % times.length;

    if (boxes[currentIdx]) {
        boxes[currentIdx].classList.add('current');
        const badge = document.createElement('span');
        badge.className = 'badge-green';
        badge.textContent = 'Current';
        boxes[currentIdx].appendChild(badge);
    }
    if (boxes[nextIdx]) {
        boxes[nextIdx].classList.add('next');
        const badge = document.createElement('span');
        badge.className = 'badge-yellow';
        badge.textContent = 'Next';
        boxes[nextIdx].appendChild(badge);
    }
}
setInterval(() => {
    updateCurrentAndNextPrayer();
    highlightCurrentAndNextPrayer();
}, 60000);

// ================== REFRESH BUTTON ==================
document.querySelector('.refresh').addEventListener('click', function() {
    location.reload();
});

// ================== NOTIFICATION BUTTON ==================
document.querySelector('.notifi').addEventListener('click', function() {
    alert('Notifications feature coming soon!');
});

// ================== QIBLA COMPASS LOGIC ==================
// Red needle: device orientation (North)
// Yellow needle: Qibla direction (static or calculated)
const qiblaNeedle = document.getElementById('qibla-needle');
const compassNeedle = document.getElementById('compass-needle');

// Set your Qibla direction in degrees (example: Karachi ‚âà 294¬∞)
const QIBLA_DIRECTION_DEGREES = 294;

function setNeedleTransforms(alpha) {
    // alpha: 0 = North, increases clockwise
    if (compassNeedle) {
        compassNeedle.style.transform = `translate(-50%, -90%) rotate(${alpha}deg)`;
    }
    if (qiblaNeedle) {
        const qiblaRelative = QIBLA_DIRECTION_DEGREES - alpha;
        qiblaNeedle.style.transform = `translate(-50%, -90%) rotate(${qiblaRelative}deg)`;
    }
}

// Device orientation event
if (window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', function(event) {
        setNeedleTransforms(event.alpha || 0);
    });
} else {
    // fallback: show static Qibla needle
    if (qiblaNeedle) qiblaNeedle.style.transform = `translate(-50%, -90%) rotate(${QIBLA_DIRECTION_DEGREES}deg)`;
    if (compassNeedle) compassNeedle.style.transform = `translate(-50%, -90%) rotate(0deg)`;
}

// ================== VERSE SLIDER LOGIC ==================
const verses = document.querySelectorAll('.verse-box');
let currentVerse = 0;
setInterval(() => {
    verses[currentVerse].classList.remove('active');
    currentVerse = (currentVerse + 1) % verses.length;
    verses[currentVerse].classList.add('active');
}, 5000);

<!-- ================= AUTO LOCATION & PRAYER TIMES ================== -->
const autoCity = document.getElementById('auto-city');
const autoCountry = document.getElementById('auto-country');
const autoLat = document.getElementById('auto-lat');
const autoLng = document.getElementById('auto-lng');
const autoTimezone = document.getElementById('auto-timezone');
const autoUpdated = document.getElementById('auto-updated');
const autoNextPrayer = document.getElementById('auto-next-prayer');
const autoNextTime = document.getElementById('auto-next-time');
const autoCountdown = document.getElementById('auto-countdown');
const autoTimesBody = document.getElementById('auto-times-body');

let prayerTimings = {};
let nextPrayerName = '';
let nextPrayerTime = '';

function pad(n){return String(n).padStart(2,'0');}
function parseHHMM(s){const m=s.match(/(\d{1,2}):(\d{2})/);if(!m)return null;return{h:+m[1],m:+m[2]};}
function toDateToday(hhmm){const now=new Date();const d=new Date(now);d.setHours(hhmm.h,hhmm.m,0,0);return d;}

function fillPrayerTable(times) {
  const order = ["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];
  autoTimesBody.innerHTML = '';
  order.forEach(name=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td style="padding:10px 6px;font-weight:600;">${name}</td>
      <td style="padding:10px 6px;font-family:monospace;font-weight:600;">${times[name]}</td>`;
    autoTimesBody.appendChild(tr);
  });
}

function computeNextPrayer(times) {
  const order = ["Fajr","Dhuhr","Asr","Maghrib","Isha"];
  const now = new Date();
  const items = order.map(n=>{
    const hhmm = parseHHMM(times[n]);
    return { name: n, at: toDateToday(hhmm) };
  });
  for(const it of items){
    if(it.at <= now) it.at.setDate(it.at.getDate() + 1);
  }
  items.sort((a,b)=>a.at-b.at);
  return items[0];
}

let countdownTimer = null;
function startCountdown(next) {
  if(countdownTimer) clearInterval(countdownTimer);
  const tick = ()=>{
    const now = new Date();
    let diff = (next.at - now) / 1000;
    if(diff < 0) diff = 0;
    const h = Math.floor(diff/3600);
    const m = Math.floor((diff%3600)/60);
    const s = Math.floor(diff%60);
    autoCountdown.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    if(diff<=0){ clearInterval(countdownTimer); }
  };
  tick();
  countdownTimer = setInterval(tick, 1000);
}

async function fetchLocationAndPrayerTimes() {
  if ("geolocation" in navigator) {
    navigator.geolocation.getCurrentPosition(async function(position) {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;
      autoLat.textContent = `üåê Lat: ${lat.toFixed(4)}`;
      autoLng.textContent = `üåê Lng: ${lng.toFixed(4)}`;
      autoUpdated.textContent = `Last updated: ${new Date().toLocaleString()}`;

      // Get city/country using OpenStreetMap Nominatim
      try {
        const geoRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`);
        const geoData = await geoRes.json();
        if (geoData.address) {
          autoCity.textContent = geoData.address.city || geoData.address.town || geoData.address.village || geoData.address.hamlet || 'Unknown';
          autoCountry.textContent = geoData.address.country || '';
        }
      } catch (e) {
        autoCity.textContent = 'Unknown';
        autoCountry.textContent = '';
      }

      // Get timezone
      try {
        const tzRes = await fetch(`https://api.aladhan.com/v1/timeZone/${lat}/${lng}`);
        const tzData = await tzRes.json();
        autoTimezone.textContent = `üïí ${tzData.data.timezone}`;
      } catch (e) {
        autoTimezone.textContent = 'üïí ‚Äî';
      }

      // Get prayer times
      try {
        const today = new Date();
        const dateStr = `${today.getDate()}-${today.getMonth()+1}-${today.getFullYear()}`;
        const res = await fetch(`https://api.aladhan.com/v1/timings/${dateStr}?latitude=${lat}&longitude=${lng}&method=2`);
        const data = await res.json();
        if (data.data && data.data.timings) {
          prayerTimings = data.data.timings;
          fillPrayerTable(prayerTimings);
          const next = computeNextPrayer(prayerTimings);
          nextPrayerName = next.name;
          nextPrayerTime = prayerTimings[next.name];
          autoNextPrayer.textContent = nextPrayerName;
          autoNextTime.textContent = nextPrayerTime;
          startCountdown(next);
        }
      } catch (e) {
        autoNextPrayer.textContent = '‚Äî';
        autoNextTime.textContent = '--:--';
        autoCountdown.textContent = '--:--:--';
      }
    }, function() {
      autoCity.textContent = 'Location denied';
      autoCountry.textContent = '';
      autoLat.textContent = 'üåê Lat: ‚Äî';
      autoLng.textContent = 'üåê Lng: ‚Äî';
      autoTimezone.textContent = 'üïí ‚Äî';
      autoUpdated.textContent = 'Last updated: ‚Äî';
      autoNextPrayer.textContent = '‚Äî';
      autoNextTime.textContent = '--:--';
      autoCountdown.textContent = '--:--:--';
      autoTimesBody.innerHTML = '';
    });
  } else {
    autoCity.textContent = 'No geolocation';
    autoCountry.textContent = '';
    autoLat.textContent = 'üåê Lat: ‚Äî';
    autoLng.textContent = 'üåê Lng: ‚Äî';
    autoTimezone.textContent = 'üïí ‚Äî';
    autoUpdated.textContent = 'Last updated: ‚Äî';
    autoNextPrayer.textContent = '‚Äî';
    autoNextTime.textContent = '--:--';
    autoCountdown.textContent = '--:--:--';
    autoTimesBody.innerHTML = '';
  }
}
fetchLocationAndPrayerTimes();
</script>
</body>
</html>